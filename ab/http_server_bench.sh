#! /bin/bash

FILE="$(date +"%Y_%m_%d_%H_%M")-bench"
touch "$FILE"

# cpu info
echo "=====================================CPU====================================" >> "$FILE"
cat /proc/cpuinfo | head -15 >> "$FILE"
# ram
echo "=====================================RAM====================================" >> "$FILE"
free -hl >> "$FILE"


echo "=====================================AB1====================================" >> "$FILE"
ab -n 3000 -c 20 http://138.91.140.75:5000/ | tee >> "$FILE"

echo "=====================================AB2====================================" >> "$FILE"
ab -n 4000 -c 40 http://138.91.140.75:5000/ | tee >> "$FILE"

echo "=====================================AB3====================================" >> "$FILE"
# ab -n 1000 -c 5 -p postfile.txt -T application/x-www-form-urlencoded http://138.91.140.75:5000/g/ | tee >> "$FILE"

echo "=====================================AB4====================================" >> "$FILE"
ab -n 4000 -c 40 http://138.91.140.75:5000/v/00001 | tee >> "$FILE"


